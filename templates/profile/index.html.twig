{% extends 'base.html.twig' %}

{% block title %}Profil{% endblock %}

{% block content %}
    <section class="parallax-window" id="short" data-parallax="scroll" data-image-src="{{ asset('assets/images/header.png') }}" data-natural-width="1400" data-natural-height="300">
        <div id="sub_header">
            <div class="container" id="sub_content">
                <div class="row">
                    <div class="col-md-12">
                        <h1>Profil</h1>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="white_bg">
        <div class="container margin_60">
            <div class="main_title">
                <h2 class="nomargin_top">Profil utilisateur</h2>
                <hr class="divider">
            </div>

            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert alert-{{ label }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endfor %}

            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <div class="form-login">
                        {{ form_start(form) }}
                        {{ form_row(form.firstname, {'attr': {'class': 'form-control', 'placeholder': 'Pr√©nom'}}) }}
                        {{ form_row(form.lastname, {'attr': {'class': 'form-control', 'placeholder': 'Nom'}}) }}
                        {{ form_row(form.email, {'attr': {'class': 'form-control', 'placeholder': 'Adresse email'}}) }}
                        {{ form_row(form.picture_user, {'attr': {'class': 'form-control'}}) }}

                        {% if app.user.pictureUser %}
                            <img src="{{ asset('assets/images/users/' ~ app.user.pictureUser) }}" alt="Photo de profil" style="max-width: 150px; max-height: 150px;">
                        {% endif %}

                        {{ form_row(form.currentPassword, {'attr': {'class': 'form-control', 'placeholder': 'Mot de passe actuel'}}) }}
                        
                        <div class="row">
                            <div class="col-md-6 col-xs-6 text-left">
                                <button type="submit" class="btn btn-primary">Enregistrer les modifications</button> 
                            </div>
                        </div>

                        {{ form_end(form) }}
                    </div>
                </div>
            </div>

            <div class="main_title">
				<br><br><br><br><br>
                <h2 class="nomargin_top">Changer le mot de passe</h2>
                <hr class="divider">
            </div>

            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <div class="form-login">
                        {{ form_start(passwordForm) }}
                        {{ form_row(passwordForm.currentPassword, {'attr': {'class': 'form-control', 'placeholder': 'Ancien mot de passe'}}) }}
                        {{ form_row(passwordForm.newPassword, {'attr': {'class': 'form-control', 'placeholder': 'Nouveau mot de passe'}}) }}
                        
                        <div class="row">
                            <div class="col-md-6 col-xs-6 text-left">
                                <button type="submit" class="btn btn-primary">Changer le mot de passe</button>
                            </div>
                        </div>

                        {{ form_end(passwordForm) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
